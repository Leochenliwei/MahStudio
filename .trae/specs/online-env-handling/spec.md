# 在线环境特殊处理 - 产品需求文档

## 概述
- **Summary**: 为 WEBconfig 项目添加在线环境的特殊处理逻辑，包括移除草稿模块、重命名测试模块为灰度模块、修改发布按钮文本以及添加正式模块。
- **Purpose**: 满足在线环境的业务需求，区分测试（灰度）和正式环境的功能和UI展示。
- **Target Users**: 游戏配置管理后台的管理员和运营人员。

## 目标
- 实现 online 环境下的特殊处理逻辑
- 移除 online 环境中的草稿模块
- 将测试约局重命名为灰度约局，测试金币重命名为灰度金币
- 将发灰度按钮重命名为发布按钮
- 添加正式约局和正式金币模块，功能类似灰度模块但无发布按钮

## 非目标（范围外）
- 不修改测试环境的现有功能
- 不改变核心业务逻辑
- 不涉及数据库结构变更

## 背景与上下文
- 当前系统已支持 test/online 环境切换
- 游戏目录页面包含草稿、测试约局、测试金币三个模块
- 在线环境需要更清晰的灰度发布流程和正式环境展示

## 功能需求
- **FR-1**: online 环境下移除草稿模块
- **FR-2**: online 环境下将测试约局重命名为灰度约局
- **FR-3**: online 环境下将测试金币重命名为灰度金币
- **FR-4**: online 环境下将发灰度按钮重命名为发布按钮
- **FR-5**: online 环境下添加正式约局模块（类似灰度约局但无发布按钮）
- **FR-6**: online 环境下添加正式金币模块（类似灰度金币但无发布按钮）

## 非功能需求
- **NFR-1**: 环境切换时 UI 变化应平滑过渡
- **NFR-2**: 代码修改应保持向后兼容，不影响测试环境功能
- **NFR-3**: 新增模块的样式应与现有模块保持一致

## 约束
- **Technical**: 基于 Vue 框架开发，使用现有的组件和样式
- **Business**: 保持操作流程的一致性和直观性
- **Dependencies**: 依赖现有的 FileCard 组件和环境切换逻辑

## 假设
- 系统已正确实现环境切换功能
- 后端已支持正式约局和正式金币的数据源
- 现有 FileCard 组件可以通过 props 控制发布按钮的显示

## 验收标准

### AC-1: online 环境下移除草稿模块
- **Given**: 用户切换到 online 环境
- **When**: 访问游戏目录页面
- **Then**: 页面中不显示草稿模块
- **Verification**: `programmatic`

### AC-2: 测试模块重命名为灰度模块
- **Given**: 用户切换到 online 环境
- **When**: 访问游戏目录页面
- **Then**: 测试约局显示为灰度约局，测试金币显示为灰度金币
- **Verification**: `human-judgment`

### AC-3: 发灰度按钮重命名为发布按钮
- **Given**: 用户切换到 online 环境
- **When**: 查看灰度约局或灰度金币模块
- **Then**: 发灰度按钮显示为发布按钮
- **Verification**: `human-judgment`

### AC-4: 新增正式约局和正式金币模块
- **Given**: 用户切换到 online 环境
- **When**: 访问游戏目录页面
- **Then**: 页面显示正式约局和正式金币模块，且无发布按钮
- **Verification**: `programmatic`

### AC-5: 测试环境功能保持不变
- **Given**: 用户切换到 test 环境
- **When**: 访问游戏目录页面
- **Then**: 页面显示草稿、测试约局、测试金币模块，功能与之前一致
- **Verification**: `programmatic`

## 未解决问题
- [ ] 正式约局和正式金币的数据源如何获取
- [ ] 正式模块的文件类型定义是否需要在后端添加