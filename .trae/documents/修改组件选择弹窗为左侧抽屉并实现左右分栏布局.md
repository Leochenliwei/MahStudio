# 修改组件选择弹窗为左侧抽屉并实现左右分栏布局

## 1. 目标
- 将组件选择弹窗改为左侧抽屉
- 实现抽屉内左右分栏布局
- 左侧显示组件列表，只显示"已启用"标签
- 右侧显示选中组件的属性，支持编辑
- 确保属性编辑功能与工作台中的一致

## 2. 实现步骤

### 2.1 修改 Drawer.vue 组件
1. **添加左侧组件选择抽屉**：
   - 创建新的左侧抽屉 `drawer-component-selector-left`
   - 实现左右分栏布局（使用 flex 布局）
   - 左侧宽度设置为 300px，右侧为剩余空间

2. **修改组件列表**：
   - 保留现有的搜索功能和分类折叠功能
   - 只显示"已启用"标签，移除其他状态标签
   - 优化组件项的布局和样式

3. **实现右侧属性面板**：
   - 参考 Workbench.vue 中的属性面板实现
   - 支持显示和编辑组件的各种属性类型：
     - 开关类型（switch）
     - 单选按钮组类型（toggle）
     - 下拉选择框类型（select）
     - 复选框类型（checkbox）
     - 文本输入类型
   - 使用 scrollview 方式呈现属性列表

4. **添加状态管理**：
   - 添加 `selectedComponents` 数组来存储用户选择的组件
   - 添加 `selectedComponentProperties` 计算属性来获取选中组件的属性
   - 实现组件选择和取消选择的逻辑

5. **添加事件处理**：
   - 实现属性修改的事件处理
   - 实现组件状态切换的事件处理
   - 实现确认选择的事件处理

6. **优化样式**：
   - 确保抽屉布局响应式
   - 优化属性面板的样式，与工作台保持一致
   - 添加适当的动画和过渡效果

### 2.2 修改相关组件
1. **修改 RoomCreatorPage.vue**：
   - 更新打开组件选择器的事件处理
   - 确保传递正确的组件数据和状态

2. **修改 Workbench.vue**：
   - 确保组件属性数据结构与抽屉中的一致
   - 优化属性编辑的逻辑，以便在抽屉中复用

## 3. 技术要点

### 3.1 布局实现
- 使用 Flexbox 实现抽屉内的左右分栏布局
- 左侧固定宽度，右侧自适应
- 两侧都使用独立的滚动条

### 3.2 属性编辑实现
- 参考 Workbench.vue 中的属性编辑逻辑
- 支持多种属性类型的编辑
- 实现属性值的双向绑定

### 3.3 状态管理
- 使用 Vue 3 的 ref 和 computed 管理状态
- 实现组件选择和属性修改的状态同步

### 3.4 性能优化
- 使用虚拟滚动处理大量组件列表
- 优化属性更新的响应速度
- 减少不必要的重渲染

## 4. 测试计划
1. **功能测试**：
   - 测试组件选择功能
   - 测试属性编辑功能
   - 测试状态切换功能
   - 测试确认选择功能

2. **兼容性测试**：
   - 测试桌面端浏览器兼容性
   - 测试移动端适配效果

3. **性能测试**：
   - 测试大量组件时的加载速度
   - 测试属性编辑的响应速度

## 5. 预期效果
- 左侧抽屉平滑滑入滑出
- 组件列表清晰显示，只包含"已启用"标签
- 右侧属性面板与工作台中的一致，支持各种属性类型的编辑
- 属性修改实时生效
- 整体布局响应式，适配不同屏幕尺寸

## 6. 风险评估
- **风险**：属性编辑逻辑与工作台不一致
  **缓解**：复用工作台中的属性编辑逻辑，确保数据结构一致

- **风险**：大量组件时性能下降
  **缓解**：实现虚拟滚动，优化渲染性能

- **风险**：响应式布局在小屏幕上显示异常
  **缓解**：添加媒体查询，针对小屏幕设备优化布局
