# 组件选择弹窗交互方案设计

## 1. 设计背景

为了完善按钮点击后的弹窗功能，需要设计一个组件选择弹窗，允许用户从工作台配置的组件中选择并修改其属性。该弹窗应保持与现有系统风格一致，提供良好的用户体验。

## 2. 设计目标

- 提供直观的组件选择界面
- 支持按分类浏览和搜索组件
- 显示组件的启用/禁用状态
- 允许用户修改组件属性
- 保持与现有系统的视觉一致性
- 提供流畅的交互体验

## 3. 界面布局设计

### 3.1 弹窗结构

弹窗采用侧边抽屉式设计，从右侧滑出，与现有系统的Drawer组件风格一致：

```
+------------------------------------------+
| 组件选择                                  |
+------------------------------------------+
| 搜索框                                    |
+------------------------------------------+
| 分类1 ▼                                   |
|   ├─ 组件1 [启用]                         |
|   └─ 组件2 [禁用]                         |
| 分类2 ▼                                   |
|   └─ 组件3 [启用]                         |
+------------------------------------------+
| 确定       取消                           |
+------------------------------------------+
```

### 3.2 主要区域

1. **头部区域**
   - 弹窗标题："组件选择"
   - 关闭按钮：使用现有的关闭图标

2. **搜索区域**
   - 搜索输入框：支持模糊搜索组件名称
   - 搜索图标：位于输入框左侧

3. **组件列表区域**
   - 分类折叠/展开：点击分类标题可展开或折叠
   - 组件项：显示组件名称和启用/禁用状态
   - 组件状态：使用颜色标识启用状态（绿色：启用，灰色：禁用）

4. **底部操作区域**
   - 确定按钮：保存选择和修改
   - 取消按钮：放弃操作并关闭弹窗

## 4. 交互流程

### 4.1 打开弹窗

1. 用户点击按钮（如"规则 0"按钮）
2. 弹窗从右侧滑出，显示组件列表
3. 默认展开所有分类

### 4.2 组件选择

1. 用户可以通过搜索框快速定位组件
2. 用户可以展开/折叠分类查看组件
3. 用户点击组件项选中该组件
4. 选中组件后，右侧显示该组件的属性编辑界面

### 4.3 属性编辑

1. 选中组件后，属性编辑区域显示该组件的所有可编辑属性
2. 用户可以修改属性值（文本、开关、选择等）
3. 修改实时反映在组件状态中

### 4.4 保存操作

1. 用户点击"确定"按钮
2. 系统保存组件选择和属性修改
3. 弹窗关闭并返回主界面

### 4.5 取消操作

1. 用户点击"取消"按钮或关闭按钮
2. 弹窗关闭，不保存任何修改

## 5. 技术实现方案

### 5.1 弹窗组件

- 基于现有的Drawer组件扩展
- 使用Vue 3的Composition API
- 响应式数据管理

### 5.2 组件数据结构

```javascript
{
  id: "component-1",
  name: "组件名称",
  category: "分类名称",
  enabled: true,  // 启用状态
  locked: false,  // 锁定状态
  properties: [   // 组件属性
    {
      id: "prop-1",
      name: "属性名称",
      type: "text",  // 文本类型
      value: "属性值"
    },
    {
      id: "prop-2",
      name: "开关属性",
      type: "switch",  // 开关类型
      value: true
    }
  ]
}
```

### 5.3 核心功能实现

1. **组件列表展示**
   - 按分类分组显示
   - 支持搜索过滤
   - 显示启用/禁用状态

2. **属性编辑**
   - 根据属性类型显示不同的编辑控件
   - 支持文本、开关、选择等类型
   - 实时更新属性值

3. **状态管理**
   - 组件启用/禁用状态切换
   - 锁定组件的状态保护

4. **动画效果**
   - 弹窗滑入/滑出动画
   - 分类展开/折叠动画
   - 组件选中状态动画

## 6. 视觉设计规范

### 6.1 颜色规范

- 主题色：#646cff
- 背景色：#252526（表面）、#2d2d30（表面 hover）
- 文本色：#ffffff（主要）、#cccccc（次要）、#858585（tertiary）
- 边框色：#3e3e42
- 启用状态：#10b981（绿色）
- 禁用状态：#6b7280（灰色）

### 6.2 间距规范

- 微小间距：4px（--spacing-1）
- 小间距：8px（--spacing-2）
- 中等间距：12px（--spacing-3）、16px（--spacing-4）
- 大间距：24px（--spacing-6）

### 6.3 字体规范

- 字号：10px（小2号）、12px（小1号）、14px（正常）、16px（大1号）
- 字重：normal、medium（500）、semibold（600）
- 行高：1.4（正常）、1.6（大）

### 6.4 图标规范

- 使用现有系统的图标库
- 图标大小：14px、16px、18px
- 图标颜色：与文本颜色保持一致

## 7. 响应式设计

- 桌面端：弹窗宽度固定为480px
- 平板端：弹窗宽度自适应为屏幕宽度的60%
- 移动端：弹窗宽度自适应为屏幕宽度的90%

## 8. 无障碍设计

- 支持键盘导航
- 支持屏幕阅读器
- 提供足够的色彩对比度
- 明确的焦点状态

## 9. 测试计划

1. **功能测试**
   - 弹窗打开/关闭功能
   - 组件搜索功能
   - 分类展开/折叠功能
   - 组件选择功能
   - 属性编辑功能
   - 保存/取消操作

2. **兼容性测试**
   - 主流浏览器兼容（Chrome、Firefox、Safari、Edge）
   - 不同屏幕尺寸适配

3. **性能测试**
   - 弹窗打开/关闭速度
   - 组件列表渲染性能
   - 搜索响应速度

## 10. 实现路径

1. 创建组件选择弹窗组件
2. 实现组件列表展示和搜索功能
3. 实现组件属性编辑界面
4. 实现组件启用/禁用状态管理
5. 添加保存和取消操作逻辑
6. 集成到现有系统中
7. 测试和优化

## 11. 预期效果

通过本设计方案，用户将能够：

- 快速找到并选择需要的组件
- 清晰了解组件的启用/禁用状态
- 方便地修改组件属性
- 获得流畅的交互体验
- 与现有系统保持视觉一致性

该方案将大大提高用户配置组件的效率和体验，为系统的整体可用性做出贡献。