# 实现基于 JSON 的 Category 容器和流程流转

## 1. 需求分析
- **输入**：`/Users/zonst/Documents/Programs/WEBconfig/components_list.json` 文件
- **需求**：
  1. 根据 JSON 生成 category，渲染为画布区的虚线框
  2. 每个组件可进入的 category 目标通过 JSON 明确指定
  3. 用流程连线模式表示 category 之间的线性流转过程

## 2. 实现方案

### 2.1 数据结构设计
- **从 JSON 提取 category**：分析 `components_list.json` 中的 `category` 属性，生成唯一的 category 列表
- **Category 数据结构**：
  ```javascript
  {
    id: "category_id",
    name: "category_name",
    x: 100,
    y: 50,
    width: 400,
    height: 300,
    components: [], // 该 category 中的组件
    order: 1 // 流转顺序
  }
  ```

### 2.2 模板修改
- **画布区**：添加 category 虚线框容器
- **流程连线**：添加 category 之间的线性流转连线
- **组件渲染**：修改组件渲染逻辑，使其显示在对应 category 中

### 2.3 功能实现
- **Category 生成**：根据 JSON 中的组件 category 属性生成 category 列表
- **组件拖拽**：实现组件拖拽到对应 category 中的逻辑
- **流程连线**：生成 category 之间的线性流转连线
- **位置管理**：自动计算 category 的位置，实现线性排列

### 2.4 样式优化
- **Category 样式**：设计虚线框样式，带有标题和组件数量
- **流程连线样式**：设计线性流转的连线样式
- **组件样式**：优化组件在 category 中的显示效果
- **交互反馈**：添加拖拽和放置的视觉反馈

## 3. 技术实现

### 3.1 数据管理
- **提取 Category**：遍历 components_list.json，提取唯一的 category 列表
- **排序 Category**：根据游戏流程逻辑对 category 进行排序
- **初始化位置**：根据排序结果计算每个 category 的位置

### 3.2 拖拽处理
- **修改拖拽逻辑**：支持将组件拖拽到对应 category 中
- **验证目标**：确保组件只能拖拽到 JSON 指定的 category 中
- **更新组件位置**：根据 category 位置调整组件位置

### 3.3 视觉效果
- **虚线框渲染**：为 category 添加虚线边框样式
- **流程连线渲染**：使用 SVG 或 CSS 实现线性流转连线
- **动画效果**：添加流程流转的动画效果

## 4. 预期效果
- **画布区**：显示多个按流程顺序排列的虚线 category 容器
- **组件管理**：组件可以拖拽到对应 category 中
- **流程可视化**：通过连线清晰展示 category 之间的线性流转过程
- **交互体验**：提供流畅的拖拽和放置体验，带有视觉反馈
- **响应式**：category 布局会根据画布大小自动调整